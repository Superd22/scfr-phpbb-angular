<div class="index" fxLayout fxLayoutWrap [ngClass.lt-md]="'small'">

    <div class="left" fxFlex="50%" fxFlex.lt-md="100%">

        <div class="forums">
            <h3>Les forums</h3>

            <a class="forum-row mat-elevation-z2" *ngFor="let forum of forumList" fxLayout mdRipple uiSref="phpbb.seo.viewforum" [uiParams]="{forumId:forum.FORUM_ID}">
                <span class="forum-name" fxFlex="50">{{forum.FORUM_NAME}}</span>
                <!--
                <div class="topics">{{}}</div>
                <div class="replies">{{}}</div> -->
            </a>
        </div>

        <div class="messages">
            <h3>Messages non lus
                <a uiSref="phpbb.seo.search" [uiParams]="{search_id:'unreadposts'}">
                    <button md-button color="primary">Voir tous les nouveaux messages</button>
                </a>
                <button class="markall"  color="primary" md-button *ngIf="tpl.U_MARK_FORUMS" (click)="markEverythingRead()">Tout marquer comme lu</button>
                
            </h3>

            <div class="messages" fxLayout fxLayoutWrap>
                <ng-container *ngFor="let message of unreadTopicList">
                    <ng-container *ngTemplateOutlet="topicDetails;context:{topic:message}"></ng-container>
                </ng-container>
            </div>

        </div>

    </div>

    <div class="right" fxFlex="50%" fxFlex.lt-md="100%">
        <div class="guide mat-elevation-z3" *ngIf="guideNouveau" [ngClass.lt-md]="'small'">
            <div class="mask">
                <h3>Guide des nouveaux</h3>

                <nav class="parts">
                    <li *ngFor="let partId of guideNewbiesParts">
                        <a [href]="guideNouveau.pageList[partId].guid">{{guideNouveau.pageList[partId].post_title}}</a>
                    </li>
                </nav>
            </div>
        </div>


        <div class="own-messages mat-elevation-z3" *ngIf="ownMessages" [ngClass.lt-md]="'small'">
            <div class="mask">
                <h3>Vos messages
                    <a uiSref="phpbb.seo.search" [uiParams]="{search_id:'egosearch'}">
                        <button md-button color="primary">Voir tous vos messages</button>
                    </a>
                </h3>

                <div class="messages" fxLayout fxLayoutWrap>
                    <ng-container *ngFor="let message of ownMessages">
                        <ng-container *ngTemplateOutlet="topicDetails;context:{topic:message}"></ng-container>
                    </ng-container>
                </div>
            </div>
        </div>

        <div class="online" *ngIf="displayOnlineMembers">
            <h3>En ligne
                <button md-button color="accent">{{onlineMembers.length}}</button>
            </h3>

            <img *ngFor="let user of displayOnlineMembers" class="avatar" [src]="user.avatar | avatarURL" [mdTooltip]="user.row.username"
                [style.border-color]="'#'+user.row.user_colour">

        </div>

    </div>

</div>

<ng-template #topicDetails let-topic="topic">
    <scfr-forum-viewforum-topic-row fxFlex="100" [topic]="topic"></scfr-forum-viewforum-topic-row>
    <!-- <div class="topic-row mat-elevation-z1" mdRipple uiSref="phpbb.seo.viewtopic" [uiParams]="{topicId:topic.TOPIC_ID, forumId:topic.FORUM_ID}" >
        <div class="lefty" fxFlex="100" fxLayout fxLayoutWrap>
            <div class="title" fxFlex="100">
                <span class="forum-name">{{topic.FORUM_TITLE}}</span><span class="topic-title">{{topic.TOPIC_TITLE}}</span>
            </div>
            <div class="details">
                Dernier message par
                <scfr-forum-phpbb-username [html]="topic.LAST_POST_AUTHOR_FULL"></scfr-forum-phpbb-username>
                {{topic.LAST_POST_TIME }}
            </div>
        </div>
        <div class="deets">
            <div fxFlex="50">
                <span>{{topic.TOPIC_VIEWS}}</span>
                <em>vues</em>
            </div>
            <div fxFlex="50">
                <span>{{topic.TOPIC_REPLIES}}</span>
                <em>r√©ponses</em>
            </div>
        </div>
    </div> -->
</ng-template>