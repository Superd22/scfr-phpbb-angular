<div class="container" fxLayoutWrap>
    <div class="top-details">
        <h2 class="forum-title"><a uiSref="phpbb.seo.viewforum" [uiParams]="{forumId: tpl.FORUM_ID}">{{tpl.FORUM_NAME}}</a></h2>
        <h3 class="topic-title"><a uiSref="phpbb.seo.viewtopic" [uiParams]="{forumId: tpl.FORUM_ID, topicId: tpl.TOPIC_ID}">{{tpl.TOPIC_TITLE}}</a></h3>
    </div>
    <ng-container [ngTemplateOutlet]="replyButton"></ng-container>

    <div fxFlex="100">
        <div fxFlex.gt-sm="60" fxFlexOffset.gt-sm="20">
            <scfr-forum-spinner-loading [show]="fetchingNewPosts"></scfr-forum-spinner-loading>
        </div>
    </div>

    <div *ngIf="tpl.postrow && !fetchingNewPosts" fxFlex="100">
        <app-viewmessage *ngFor="let post of tpl.postrow" [postrow]="post" [editable]="true" [(edit)]="editedMessage"></app-viewmessage>
    </div>

    <div *ngIf="newPosts > 0" class="newpostsws">
        <p [ngPlural]="newPosts">
            <ng-template ngPluralCase="=1">Une nouvelle réponse</ng-template>
            <ng-template ngPluralCase="other">{{newPosts}} nouvelles réponses</ng-template>
        </p>
    </div>


</div>

<scfr-forum-global-pagination [page]="tpl.CURRENT_PAGE" (pageChange)="changePage($event)" [totalPage]="tpl.TOTAL_PAGES">
    <ng-container [ngTemplateOutlet]="replyButton"></ng-container>
</scfr-forum-global-pagination>


<ng-template #replyButton>
    <button md-button uiSref=".posting">Répondre</button>
</ng-template>